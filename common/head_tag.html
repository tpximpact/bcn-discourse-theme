<!-- OneTrust Cookies Consent Notice start for breastcancernow.org -->
<script type="text/javascript">
  function OptanonWrapper() { }
</script>

<script type="text/discourse-plugin" version="0.8">

    api.onPageChange(() =>{
      loadOneTrustScripts()
      reloadOTBanner()
      clearDup()
    });

    // for testing onPageChange() 
    function randBackground() {
        $('body').css('background-color', '#'+(Math.random()*0xFFFFFF<<0).toString(16));
    }

    function loadOneTrustScripts(){

    if (!document.querySelector('#onetrust-cdn')) {
      var script = document.createElement("script")
      script.setAttribute("type","text/javascript")
      script.setAttribute("src", "https://cdn-ukwest.onetrust.com/consent/eadcfc54-44a8-4b96-8e92-63f1ffe58243/OtAutoBlock.js") 
      script.setAttribute("id", "onetrust-cdn") 
      document.head.appendChild(script)
    }
      
    
    if (!document.querySelector('#onetrust-template')) {
      var script2 = document.createElement("script")
      script2.setAttribute("type","text/javascript")
      script2.setAttribute("src", "https://cdn-ukwest.onetrust.com/scripttemplates/otSDKStub.js") 
      script2.setAttribute("data-domain-script", "eadcfc54-44a8-4b96-8e92-63f1ffe58243") 
      script2.setAttribute("id", "onetrust-template")
      script2.setAttribute("charset", "UTF-8")
      document.head.appendChild(script2); 
    }
    }


    function getCookie(name) {
        var value = "; " + document.cookie;
        var parts = value.split("; " + name + "=");
        if (parts.length == 2) {
            return true;
        }
    }

    function reloadOTBanner() {

        var otConsentSdk = document.getElementById("onetrust-consent-sdk");
        if (otConsentSdk) {
            otConsentSdk.remove();
        }

        if (window.OneTrust != null) {
            OneTrust.Init();

            setTimeout(function() {
                OneTrust.LoadBanner();

                var toggleDisplay = document.getElementsByClassName(
                    "ot-sdk-show-settings"
                );

                for (var i = 0; i < toggleDisplay.length; i++) {
                    toggleDisplay[i].onclick = function(event) {
                        event.stopImmediatePropagation();
                        window.OneTrust.ToggleInfoDisplay();
                    };
                }
            }, 1000); 
        }
    }

    //SHOULD BE USED ONLY ON COOKIE POLICY. TRIGGER FUNCTION BELOW TO REMOVE DUPLICATE CATEGORIES
    function clearDup() {
        var sec = document.getElementById("ot-sdk-cookie-policy")
        var tally = [];
        if(sec){
          for (var i = sec.length - 1; i >= 0; i--) {
            if (tally[sec[i].firstChild.innerText] === undefined) {
                tally[sec[i].firstChild.innerText] = 1;
            } else {
                //console.log(i,sec[i].firstChild.innerText);
                sec[i].remove();
                //return true;
            }
          }
        }
     
        //return false;
    }
</script>
<!-- OneTrust Cookies Consent Notice end for breastcancernow.org -->